# ⚡ Record Helper 配置檔案 (API + LINE Bot)
# 
# 🚀 快速開始:
# 1. 複製此檔案為 .env
# 2. 填入您的數據庫連接信息
# 3. 填入您的 API 金鑰
# 4. 選擇語音轉文字服務
#

# 🗄️ 數據庫配置 (PostgreSQL)
DB_HOST=192.168.31.247
DB_PORT=5444
DB_NAME=record
DB_USER=root
DB_PASSWORD=VZq9rWbC3oJYFYdDrjT6edewVHQEKNCBWPDnyqxKyzMTE3CoozBrWnYsi6KkpwKujcFKDytQCrxhTbcxsAB2vswcVgQc9ieYvtpP

# 🔐 JWT認證配置
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production-please

# 📁 文件上傳配置
UPLOAD_FOLDER=uploads
MAX_FILE_SIZE=104857600  # 100MB (bytes)

# 📱 LINE Bot 配置 (可選 - 如不使用可留空)
LINE_CHANNEL_ACCESS_TOKEN=你的_LINE_頻道訪問令牌
LINE_CHANNEL_SECRET=你的_LINE_頻道秘密

# 🚀 語音轉文字服務配置
# 可選擇: "openai", "deepgram", "local_whisper", "faster_whisper", 或 "gemini_audio"
# 推薦: faster_whisper (Mac M4 Pro 最佳選擇，免費且高性能)
# 新增: gemini_audio (Gemini 2.0 音頻理解，支援直接處理音頻+摘要)
SPEECH_TO_TEXT_PROVIDER=faster_whisper

# OpenAI 配置 (當使用 OpenAI Whisper 時)
OPENAI_API_KEY=你的_OpenAI_API_金鑰
WHISPER_MODEL_NAME=whisper-1

# Deepgram 配置 (當使用 Deepgram 時)
DEEPGRAM_API_KEY=你的_Deepgram_API_金鑰
# 支援多個 Deepgram API 金鑰輪換使用（提高配額和穩定性）
DEEPGRAM_API_KEY_1=你的_第一個_Deepgram_API_金鑰
DEEPGRAM_API_KEY_2=你的_第二個_Deepgram_API_金鑰
DEEPGRAM_API_KEY_3=你的_第三個_Deepgram_API_金鑰
DEEPGRAM_MODEL=nova-2
DEEPGRAM_LANGUAGE=zh-TW

# 🔥 Faster-Whisper 配置 (推薦！高性能本地服務)
# 適用於: faster_whisper 和 local_whisper 服務
# 
# 📊 Mac M4 Pro 模型選擇指南:
# ┌─────────┬─────────┬─────────┬──────────┬──────────┐
# │ 模型    │ 大小    │ 速度    │ 準確性   │ 記憶體   │
# ├─────────┼─────────┼─────────┼──────────┼──────────┤
# │ tiny    │ 39MB    │ 極快    │ 普通     │ 低       │
# │ base    │ 74MB    │ 快      │ 好       │ 低       │
# │ small   │ 244MB   │ 較快    │ 很好     │ 中等     │ ⭐ 推薦
# │ turbo   │ 809MB   │ 快      │ 最高     │ 高       │
# └─────────┴─────────┴─────────┴──────────┴──────────┘
#
LOCAL_WHISPER_MODEL=small        # 🏆 推薦：最佳平衡
# LOCAL_WHISPER_MODEL=turbo      # 🎯 備選：最高準確性  
# LOCAL_WHISPER_MODEL=base       # ⚡ 備選：最快速度
# LOCAL_WHISPER_MODEL=tiny       # 💾 備選：記憶體受限

# 可選語言: zh=中文(簡體/繁體), yue=粵語, ja=日語, en=英語, 等
LOCAL_WHISPER_LANGUAGE=zh

# 任務: transcribe=轉錄, translate=翻譯成英文
LOCAL_WHISPER_TASK=transcribe

# 計算設備: auto=自動選擇, mps=Apple GPU, cuda=NVIDIA GPU, cpu=CPU
# 注意: faster-whisper 在 CPU 上已經很快，不需要 GPU
LOCAL_WHISPER_DEVICE=auto

# Google Gemini 配置 (AI 摘要服務)
GOOGLE_API_KEY=你的_Google_API_金鑰
# 支援多個 API 金鑰輪換使用
GOOGLE_API_KEY_1=你的_第一個_Google_API_金鑰
GOOGLE_API_KEY_2=你的_第二個_Google_API_金鑰
GOOGLE_API_KEY_3=你的_第三個_Google_API_金鑰

# AI 模型配置
GEMINI_MODEL_NAME=gemini-2.5-flash-preview-05-20
THINKING_BUDGET=256
MAX_RETRIES=2

# 系統配置
MAX_WORKERS=4
WEBHOOK_TIMEOUT=25
FULL_ANALYSIS=true
MAX_SEGMENTS_FOR_FULL_ANALYSIS=50

# 📡 Redis配置 (可選，用於Celery異步任務)
# 如果不使用異步處理可以留空，系統會自動使用同步處理
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# 🚀 運行配置
HOST=0.0.0.0
PORT=5000
DEBUG=true

# 💰 服務比較 (Mac M4 Pro):
# 
# 🏆 Faster-Whisper (推薦):
#   - 成本: 免費
#   - 速度: 極快 (4-8倍於原版 Whisper)
#   - 準確性: 極高
#   - 記憶體: 優化 (減少50%)
#   - 特色: int8量化，多核心並行，支援時間戳
#
# 🆕 Gemini Audio (最新):
#   - 成本: 依 Gemini API 計費
#   - 速度: 快 (雲端，單次處理)
#   - 準確性: 極高
#   - 特色: 直接音頻理解，同時提供轉錄+摘要，支援非語音內容分析
#   - 限制: 最大 100MB，9.5小時音頻
#   - 支援格式: MP3, WAV, AIFF, AAC, OGG, FLAC
#
# ☁️ OpenAI Whisper API: 
#   - 成本: $0.006/分鐘 
#   - 速度: 快 (雲端)
#   - 準確性: 極高
#
# ☁️ Deepgram: 
#   - 成本: $0.0043/分鐘 (節省28%)
#   - 速度: 最快 (雲端)
#   - 準確性: 高
#
# 🐌 原版 Local Whisper: 
#   - 成本: 免費
#   - 速度: 極慢 (194秒)
#   - 準確性: 極高
#   - 問題: MPS不相容

# 📚 API端點說明:
# 
# 🔐 認證相關:
#   POST /api/auth/register   - 用戶註冊
#   POST /api/auth/login      - 用戶登入
#   POST /api/auth/refresh    - 刷新令牌
#   POST /api/auth/logout     - 用戶登出
#
# 👤 用戶相關:
#   GET  /api/users/profile      - 獲取用戶資料
#   PUT  /api/users/profile      - 更新用戶資料
#   GET  /api/users/statistics   - 用戶統計信息
#
# 🎵 錄音相關:
#   GET  /api/recordings         - 錄音列表
#   POST /api/recordings/upload  - 上傳錄音
#   GET  /api/recordings/{id}    - 錄音詳情
#   PUT  /api/recordings/{id}    - 更新錄音
#   DELETE /api/recordings/{id}  - 刪除錄音
#
# 📝 分析相關:
#   GET  /api/recordings/{id}/analysis    - 分析結果
#   POST /api/recordings/{id}/reanalyze   - 重新分析
#
# 🏥 健康檢查:
#   GET  /health      - 服務健康狀態
#   GET  /api/status  - API狀態詳情 